

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>forecaster package &mdash; forecaster 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="forecaster.accounts package" href="forecaster.accounts.html" />
    <link rel="prev" title="forecaster" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> forecaster
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">forecaster</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">forecaster package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="forecaster.accounts.html">forecaster.accounts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.html">forecaster.canada package</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.forecast.html">forecaster.forecast package</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.ledger.html">forecaster.ledger package</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.html">forecaster.strategy package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.forecaster">forecaster.forecaster module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.person">forecaster.person module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.scenario">forecaster.scenario module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.settings">forecaster.settings module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.tax">forecaster.tax module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster.utility">forecaster.utility module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-forecaster">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">forecaster</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">forecaster</a> &raquo;</li>
        
      <li>forecaster package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/forecaster.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="forecaster-package">
<h1>forecaster package<a class="headerlink" href="#forecaster-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="forecaster.accounts.html">forecaster.accounts package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts.base">forecaster.accounts.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts.debt">forecaster.accounts.debt module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts.link">forecaster.accounts.link module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts.linked_limit">forecaster.accounts.linked_limit module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts.util">forecaster.accounts.util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.accounts.html#module-forecaster.accounts">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forecaster.canada.html">forecaster.canada package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forecaster.canada.accounts.html">forecaster.canada.accounts package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts.principle_residence">forecaster.canada.accounts.principle_residence module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts.registered_account">forecaster.canada.accounts.registered_account module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts.rrsp">forecaster.canada.accounts.rrsp module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts.taxable_account">forecaster.canada.accounts.taxable_account module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts.tfsa">forecaster.canada.accounts.tfsa module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.canada.accounts.html#module-forecaster.canada.accounts">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#module-forecaster.canada.constants">forecaster.canada.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#module-forecaster.canada.forecaster">forecaster.canada.forecaster module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#module-forecaster.canada.settings">forecaster.canada.settings module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#module-forecaster.canada.tax">forecaster.canada.tax module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.canada.html#module-forecaster.canada">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forecaster.forecast.html">forecaster.forecast package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.base">forecaster.forecast.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.income">forecaster.forecast.income module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.living_expenses">forecaster.forecast.living_expenses module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.saving">forecaster.forecast.saving module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.subforecast">forecaster.forecast.subforecast module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.tax">forecaster.forecast.tax module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast.withdrawal">forecaster.forecast.withdrawal module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.forecast.html#module-forecaster.forecast">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forecaster.ledger.html">forecaster.ledger package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forecaster.ledger.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.ledger.html#module-forecaster.ledger.base">forecaster.ledger.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.ledger.html#module-forecaster.ledger.money">forecaster.ledger.money module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.ledger.html#module-forecaster.ledger.recorded_property">forecaster.ledger.recorded_property module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.ledger.html#module-forecaster.ledger">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="forecaster.strategy.html">forecaster.strategy package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="forecaster.strategy.debt_payment.html">forecaster.strategy.debt_payment package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.debt_payment.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.debt_payment.html#module-forecaster.strategy.debt_payment.base">forecaster.strategy.debt_payment.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.debt_payment.html#module-forecaster.strategy.debt_payment.util">forecaster.strategy.debt_payment.util module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.debt_payment.html#module-forecaster.strategy.debt_payment">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="forecaster.strategy.transaction.html">forecaster.strategy.transaction package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction.base">forecaster.strategy.transaction.base module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction.graph">forecaster.strategy.transaction.graph module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction.node">forecaster.strategy.transaction.node module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction.strategy">forecaster.strategy.transaction.strategy module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction.util">forecaster.strategy.transaction.util module</a></li>
<li class="toctree-l4"><a class="reference internal" href="forecaster.strategy.transaction.html#module-forecaster.strategy.transaction">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#module-forecaster.strategy.allocation">forecaster.strategy.allocation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#module-forecaster.strategy.base">forecaster.strategy.base module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#module-forecaster.strategy.gross_transaction">forecaster.strategy.gross_transaction module</a></li>
<li class="toctree-l2"><a class="reference internal" href="forecaster.strategy.html#module-forecaster.strategy">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-forecaster.forecaster">
<span id="forecaster-forecaster-module"></span><h2>forecaster.forecaster module<a class="headerlink" href="#module-forecaster.forecaster" title="Permalink to this headline">¶</a></h2>
<p>This module provides classes for creating and managing Forecasts.</p>
<dl class="class">
<dt id="forecaster.forecaster.Forecaster">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.forecaster.</code><code class="sig-name descname">Forecaster</code><span class="sig-paren">(</span><em class="sig-param">settings=None</em>, <em class="sig-param">scenario=None</em>, <em class="sig-param">living_expenses_strategy=None</em>, <em class="sig-param">saving_strategy=None</em>, <em class="sig-param">withdrawal_strategy=None</em>, <em class="sig-param">tax_treatment=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A convenience class for building Forecasts based on settings.</p>
<p><cite>Forecaster</cite> takes in information for building a <cite>Forecast</cite>
(explicitly, via a <cite>Settings</cite> object, or via a combination of the
two) and builds one or more <cite>Forecast</cite> objects from that
information.</p>
<p>One of the purposes of this class is to enable building <cite>Forecast</cite>
objects solely from a <cite>Settings</cite> object and some <cite>Ledger</cite> objects
(i.e. people, assets, and debts.) Client code may optionally
provide certain parameters required by <cite>Forecast</cite> or its members,
which will be used as-is without values from <cite>Settings</cite>. Client
code may also (or alternatively) build parameters with partial
init args; <cite>Forecaster</cite> will fill in any remaining init args with
the appropriate values from <cite>Settings</cite>.</p>
<p><cite>Forecaster</cite> also can be used to build certain objects which
are used by <cite>Ledger</cite> arguments to <cite>Forecaster.run_forecast()</cite>,
such as <cite>Tax</cite> and <cite>AllocationStrategy</cite> objects (used
by <cite>Person</cite> and some <cite>Account</cite> objects, respectively.)</p>
<p><cite>Forecaster</cite> does not mutate values provided to it. <cite>Ledger</cite>
objects passed by client code are copied (actually deepcopied, so
that relationships between them are preserved), and the copies are
mutated and returned. This makes it easy to tweak a few parameters
and run another forecast, e.g. via Monte Carlo sampling.</p>
<dl class="method">
<dt id="forecaster.forecaster.Forecaster.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">settings=None</em>, <em class="sig-param">scenario=None</em>, <em class="sig-param">living_expenses_strategy=None</em>, <em class="sig-param">saving_strategy=None</em>, <em class="sig-param">withdrawal_strategy=None</em>, <em class="sig-param">tax_treatment=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inits an instance of <cite>Forecaster</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.forecaster.Forecaster.build_allocation_strategy">
<code class="sig-name descname">build_allocation_strategy</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.build_allocation_strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.build_allocation_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method to build an allocation strategy.</p>
<p>Any arguments are passed on to AllocationStrategy.__init__. Any
arguments that aren’t passed explicitly to this function are
instead pulled from the <cite>Forecaster</cite> instance’s <cite>settings</cite>
attribute.</p>
<p>The reason this specific object gets its own method is that
client code will likely need to call it to initialize <cite>Account</cite>
objects. In the future, we may provide similar methods for
other parameters.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.forecaster.Forecaster.build_param">
<code class="sig-name descname">build_param</code><span class="sig-paren">(</span><em class="sig-param">param_name</em>, <em class="sig-param">*args</em>, <em class="sig-param">param_type=None</em>, <em class="sig-param">memo=None</em>, <em class="sig-param">_special_builder=True</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.build_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.build_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a parameter based on settings and explicit args.</p>
<p>This method does not set any attributes of <cite>Forecaster</cite>, it only
builds an object and returns it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param_name</strong> (<em>str</em>) – The name of the parameter. This should
match a key value in <cite>self.default_values</cite>.</p></li>
<li><p><strong>*args</strong> (<em>Any</em>) – Positional arguments to be passed to the init
method of the object being built. Optional.</p></li>
<li><p><strong>param_type</strong> (<em>type</em>) – The type of the parameter. Optional.
Defaults to the type provided by <cite>self.default_types</cite>.</p></li>
<li><p><strong>memo</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A mapping from parameter names to
objects. This is not generally needed by client code;
in cases where <cite>build_param</cite> needs to build other
parameters to build the requested parameter, this dict
is mutated to record already-built parameters. Optional.</p></li>
<li><p><strong>_special_builder</strong> (<em>Boolean</em>) – Parameters which require special
logic to init (as identified in <cite>self.default_builders</cite>)
will only have the corresponding special builder called
iff this value is True. Optional.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Keyword arguments to be passed to the init
method of the object being built. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object of type <cite>param_type</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.forecaster.Forecaster.get_param">
<code class="sig-name descname">get_param</code><span class="sig-paren">(</span><em class="sig-param">param_name</em>, <em class="sig-param">memo=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.get_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.get_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a parameter, builds one if none is explicitly provided.</p>
<p>If a parameter has been explicitly assigned to this <cite>Forecaster</cite>
instance then that object is returned. Otherwise, this method
calls <cite>build_param</cite> to build it dynamically and returns it
without setting any attributes of the <cite>Forecaster</cite> object.</p>
<p>This is a convenience method which allows one to guarantee
that an object will be returned (if <cite>param_name</cite> is supported)
whether or not it is been explicitly set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param_name</strong> (<em>str</em>) – The name of the parameter. This should
match a key value in <cite>self.default_values</cite>.</p></li>
<li><p><strong>memo</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A mapping from parameter names to
objects. This is not generally needed by client code;
in cases where <cite>build_param</cite> needs to build other
parameters to build the requested parameter, this dict
is mutated to record already-built parameters. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The value of the attribute with name <cite>param_name</cite> or, if
that value is None, a dynamically-built object that uses
the values of <cite>settings</cite> for init.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.forecaster.Forecaster.run_forecast">
<code class="sig-name descname">run_forecast</code><span class="sig-paren">(</span><em class="sig-param">people</em>, <em class="sig-param">accounts</em>, <em class="sig-param">debts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.run_forecast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.run_forecast" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a <cite>Forecast</cite> object.</p>
<p>This method builds a <cite>Forecast</cite> based on any explicitly-provided
parameters (e.g. <cite>scenario</cite>, <cite>living_expenses_strategy</cite>) and
the applicable <cite>settings</cite>. Any parameters that have not been
explicitly provided are built dynamically.</p>
<p>Arguments (<cite>people</cite>, etc.) are copied. Copies are mutated, but
the objects passed as arguments are not so that they an be
re-used (and because mutating arguments is considered rude).
Relationships between arguments and their members are preserved
via <cite>deepcopy</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>people</strong> (<em>set</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>]</em>) – One or more people for whom a forecast
is being generated.</p></li>
<li><p><strong>accounts</strong> (<em>set</em><em>[</em><a class="reference internal" href="forecaster.accounts.html#forecaster.accounts.base.Account" title="forecaster.accounts.base.Account"><em>Account</em></a><em>]</em>) – Accounts belonging to the plannees.</p></li>
<li><p><strong>debts</strong> (<em>set</em><em>[</em><a class="reference internal" href="forecaster.accounts.html#forecaster.accounts.debt.Debt" title="forecaster.accounts.debt.Debt"><em>Debt</em></a><em>]</em>) – Debts owed by the plannees.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A forecast of the plannees income, savings,
and withdrawals over the years.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.forecast.html#forecaster.forecast.base.Forecast" title="forecaster.forecast.base.Forecast">Forecast</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.forecaster.Forecaster.set_param">
<code class="sig-name descname">set_param</code><span class="sig-paren">(</span><em class="sig-param">param_name</em>, <em class="sig-param">*args</em>, <em class="sig-param">param_type=None</em>, <em class="sig-param">memo=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/forecaster.html#Forecaster.set_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Forecaster.set_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a parameter and sets the corresponding attribute.</p>
<p>This is a convenience method that calls <cite>build_param</cite> and
sets the result as the value of the corresponding attribute of
this <cite>Forecaster</cite> object.</p>
<p>Note that by calling this method, the resulting object will be
used without modification by <cite>run_forecast</cite> even if the
<cite>settings</cite> object changes. You can un-set the parameter by
assigning <cite>None</cite> to that attribute.</p>
<p>This method does not set any attributes of <cite>Forecaster</cite>, it only
builds an object and returns it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param_name</strong> (<em>str</em>) – The name of the parameter. This should
match a key value in <cite>self.default_values</cite>.</p></li>
<li><p><strong>*args</strong> (<em>Any</em>) – Positional arguments to be passed to the init
method of the object being built. Optional.</p></li>
<li><p><strong>param_type</strong> (<em>type</em>) – The type of the parameter. Optional.
Defaults to the type provided by <cite>self.default_types</cite>.</p></li>
<li><p><strong>memo</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A mapping from parameter names to
objects. This is not generally needed by client code;
in cases where <cite>build_param</cite> needs to build other
parameters to build the requested parameter, this dict
is mutated to record already-built parameters. Optional.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Keyword arguments to be passed to the init
method of the object being built. Optional.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="forecaster.forecaster.Parameter">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.forecaster.</code><code class="sig-name descname">Parameter</code><a class="reference internal" href="_modules/forecaster/forecaster.html#Parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.forecaster.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>Defines names of <cite>Forecaster</cite> parameters.</p>
<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.ALLOCATION_STRATEGY">
<code class="sig-name descname">ALLOCATION_STRATEGY</code><em class="property"> = 'allocation_strategy'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.ALLOCATION_STRATEGY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.LIVING_EXPENSES_STRATEGY">
<code class="sig-name descname">LIVING_EXPENSES_STRATEGY</code><em class="property"> = 'living_expenses_strategy'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.LIVING_EXPENSES_STRATEGY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.SAVING_STRATEGY">
<code class="sig-name descname">SAVING_STRATEGY</code><em class="property"> = 'saving_strategy'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.SAVING_STRATEGY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.SCENARIO">
<code class="sig-name descname">SCENARIO</code><em class="property"> = 'scenario'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.SCENARIO" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.TAX_TREATMENT">
<code class="sig-name descname">TAX_TREATMENT</code><em class="property"> = 'tax_treatment'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.TAX_TREATMENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.forecaster.Parameter.WITHDRAWAL_STRATEGY">
<code class="sig-name descname">WITHDRAWAL_STRATEGY</code><em class="property"> = 'withdrawal_strategy'</em><a class="headerlink" href="#forecaster.forecaster.Parameter.WITHDRAWAL_STRATEGY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-forecaster.person">
<span id="forecaster-person-module"></span><h2>forecaster.person module<a class="headerlink" href="#module-forecaster.person" title="Permalink to this headline">¶</a></h2>
<p>A module providing a Person class.</p>
<dl class="class">
<dt id="forecaster.person.Person">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.person.</code><code class="sig-name descname">Person</code><span class="sig-paren">(</span><em class="sig-param">initial_year</em>, <em class="sig-param">name</em>, <em class="sig-param">birth_date</em>, <em class="sig-param">retirement_date=None</em>, <em class="sig-param">gross_income=0</em>, <em class="sig-param">raise_rate=0</em>, <em class="sig-param">spouse=None</em>, <em class="sig-param">tax_treatment=None</em>, <em class="sig-param">payment_timing=None</em>, <em class="sig-param">inputs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/person.html#Person"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.person.Person" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.base.TaxSource" title="forecaster.ledger.base.TaxSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">forecaster.ledger.base.TaxSource</span></code></a></p>
<p>Represents a person’s basic information: age and retirement age.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The person’s name. No specific form is required;
this is only used for display, not any computations.</p></li>
<li><p><strong>birth_date</strong> (<em>datetime</em><em>, </em><em>str</em><em>, </em><em>int</em>) – The person’s birth date.
May be passed as an int (interpreted as the birth year) or
as a datetime-convertible value (e.g. a string in a
suitable format)</p></li>
<li><p><strong>retirement_date</strong> (<em>datetime</em><em>, </em><em>str</em><em>, </em><em>int</em>) – The person’s retirement
date. Optional.
May be passed as an int (interpreted as the birth year) or
as a datetime-convertible value (e.g. a string in a
suitable format)</p></li>
<li><p><strong>gross_income</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – Annual gross income for the initial year.</p></li>
<li><p><strong>raise_rate</strong> (<em>Decimal</em><em>, </em><em>Callable</em>) – The person’s raise in gross
income for each year relative to the previous year.</p></li>
<li><p><strong>payment_timing</strong> (<a class="reference internal" href="#forecaster.utility.Timing" title="forecaster.utility.Timing"><em>Timing</em></a><em>, </em><em>dict</em><em>[</em><em>float</em><em>, </em><em>float</em><em>]</em>) – The timings of
payments mapped to the weight of each payment. Optional.</p></li>
<li><p><strong>spouse</strong> (<a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a>) – The person’s spouse. This linkage is
one-to-one; the spouse’s <cite>spouse</cite> attribute points back to
this Person.</p></li>
<li><p><strong>tax_treatment</strong> (<a class="reference internal" href="#forecaster.tax.Tax" title="forecaster.tax.Tax"><em>Tax</em></a>) – The tax treatment of the person. A callable
object; see documentation for <cite>Tax</cite> for more information.</p></li>
<li><p><strong>inputs</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>[</em><em>int</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – <p><cite>{attr: {year: val}}</cite>
pairs, where <cite>attr</cite> is any one of <cite>Person</cite>’s recorded
propertes, namely:</p>
<ul>
<li><p>taxable_income</p></li>
<li><p>tax_withheld</p></li>
<li><p>tax_credit</p></li>
<li><p>tax_deduction</p></li>
<li><p>gross_income</p></li>
<li><p>net_income</p></li>
<li><p>raise_rate</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="forecaster.person.Person.accounts">
<code class="sig-name descname">accounts</code><a class="headerlink" href="#forecaster.person.Person.accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>All accounts naming this Person as an owner.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>set</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#forecaster.person.Person.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The person’s name. No specific form is required;
this is only used for display, not any computations.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.birth_date">
<code class="sig-name descname">birth_date</code><a class="headerlink" href="#forecaster.person.Person.birth_date" title="Permalink to this definition">¶</a></dt>
<dd><p>The person’s birth date.
May be passed as an int (interpreted as the birth year) or
as a datetime-convertible value (e.g. a string in a
suitable format)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.retirement_date">
<code class="sig-name descname">retirement_date</code><a class="headerlink" href="#forecaster.person.Person.retirement_date" title="Permalink to this definition">¶</a></dt>
<dd><p>The person’s retirement date.
Optional.
May be passed as an int (interpreted as the birth year) or
as a datetime-convertible value (e.g. a string in a
suitable format)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>datetime</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.gross_income">
<code class="sig-name descname">gross_income</code><a class="headerlink" href="#forecaster.person.Person.gross_income" title="Permalink to this definition">¶</a></dt>
<dd><p>Annual gross income for the current year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.gross_income_history">
<code class="sig-name descname">gross_income_history</code><a class="headerlink" href="#forecaster.person.Person.gross_income_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Gross income for all
years on record.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, <a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.net_income">
<code class="sig-name descname">net_income</code><a class="headerlink" href="#forecaster.person.Person.net_income" title="Permalink to this definition">¶</a></dt>
<dd><p>Annual net income for the current year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.net_income_history">
<code class="sig-name descname">net_income_history</code><a class="headerlink" href="#forecaster.person.Person.net_income_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Net income for all
years on record.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, <a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.raise_rate_callable">
<code class="sig-name descname">raise_rate_callable</code><a class="headerlink" href="#forecaster.person.Person.raise_rate_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>A function for determining the
Person’s raise rate for a given year. A callable object with
the form <cite>raise_rate_function(year) -&gt; Decimal</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.raise_rate">
<code class="sig-name descname">raise_rate</code><a class="headerlink" href="#forecaster.person.Person.raise_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>The person’s raise in gross income this
year relative to last year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Decimal</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.raise_rate_history">
<code class="sig-name descname">raise_rate_history</code><a class="headerlink" href="#forecaster.person.Person.raise_rate_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises for all years
on record.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.payment_timing">
<code class="sig-name descname">payment_timing</code><a class="headerlink" href="#forecaster.person.Person.payment_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>The timings of
payments and the weight of each payment timing. Optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#forecaster.utility.Timing" title="forecaster.utility.Timing">Timing</a>, dict[float, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.spouse">
<code class="sig-name descname">spouse</code><a class="headerlink" href="#forecaster.person.Person.spouse" title="Permalink to this definition">¶</a></dt>
<dd><p>The person’s spouse. This linkage is
one-to-one; the spouse’s <cite>spouse</cite> attribute points back to
this Person.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person">Person</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.person.Person.tax_treatment">
<code class="sig-name descname">tax_treatment</code><a class="headerlink" href="#forecaster.person.Person.tax_treatment" title="Permalink to this definition">¶</a></dt>
<dd><p>The tax treatment of the person. A callable
object; see documentation for <cite>Tax</cite> for more information.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#forecaster.tax.Tax" title="forecaster.tax.Tax">Tax</a></p>
</dd>
</dl>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – birth_date or retirement_date are not parseable
    as datetimes due to an unexpected type.</p></li>
<li><p><strong>ValueError</strong> – birth_date or retirement_date are not parseable
    as datetimes due to an unexpected value.</p></li>
<li><p><strong>ValueError</strong> – retirement_date precedes birth_date</p></li>
<li><p><strong>OverflowError</strong> – birth_date or retirement_date are too large.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="forecaster.person.Person.__gt__">
<code class="sig-name descname">__gt__</code><span class="sig-paren">(</span><em class="sig-param">other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/person.html#Person.__gt__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.person.Person.__gt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows for sorting, max, min, etc. based on gross income.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">initial_year</em>, <em class="sig-param">name</em>, <em class="sig-param">birth_date</em>, <em class="sig-param">retirement_date=None</em>, <em class="sig-param">gross_income=0</em>, <em class="sig-param">raise_rate=0</em>, <em class="sig-param">spouse=None</em>, <em class="sig-param">tax_treatment=None</em>, <em class="sig-param">payment_timing=None</em>, <em class="sig-param">inputs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/person.html#Person.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.person.Person.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a <cite>Person</cite> object.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.age">
<code class="sig-name descname">age</code><span class="sig-paren">(</span><em class="sig-param">date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/person.html#Person.age"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.person.Person.age" title="Permalink to this definition">¶</a></dt>
<dd><p>The age of the <cite>Person</cite> as of <cite>date</cite>.</p>
<p><cite>date</cite> may be a <cite>datetime</cite> object or a numeric value indicating
a year (e.g. 2001). In the latter case, the age on the person’s
birthday (in that year) is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> – The date at which to determine the person’s age.
May be passed as a datetime or any other value that can
be cast to str and converted to datetime by
python-dateutils.parse().</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The age of the <cite>Person</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – <cite>date</cite> is not parseable as a datetime.</p></li>
<li><p><strong>ValueError</strong> – <cite>date</cite> is earlier than <cite>birth_date</cite>.</p></li>
<li><p><strong>OverflowError</strong> – <cite>date</cite> is too large.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">birth_date</code></dt>
<dd><p>The birth date of the Person.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">gross_income</code></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">gross_income_history</code></dt>
<dd><p>Record of gross_income over all past years.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">net_income</code></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">net_income_history</code></dt>
<dd><p>Record of net_income over all past years.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">raise_rate</code></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">raise_rate_callable</code></dt>
<dd><p>A callable object that generates a raise rate for the year.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A function with signature
<cite>raise_rate(year) -&gt; Decimal</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>callable</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">raise_rate_history</code></dt>
<dd><p>Record of raise_rate over all past years.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.retirement_age">
<em class="property">property </em><code class="sig-name descname">retirement_age</code><a class="headerlink" href="#forecaster.person.Person.retirement_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The age of the Person at retirement</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">retirement_date</code></dt>
<dd><p>The retirement date of the Person.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">spouse</code></dt>
<dd><p>The Person’s spouse.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_credit">
<em class="property">property </em><code class="sig-name descname">tax_credit</code><a class="headerlink" href="#forecaster.person.Person.tax_credit" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_credit_history">
<em class="property">property </em><code class="sig-name descname">tax_credit_history</code><a class="headerlink" href="#forecaster.person.Person.tax_credit_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Record of tax_credit over all past years.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_deduction">
<em class="property">property </em><code class="sig-name descname">tax_deduction</code><a class="headerlink" href="#forecaster.person.Person.tax_deduction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_deduction_history">
<em class="property">property </em><code class="sig-name descname">tax_deduction_history</code><a class="headerlink" href="#forecaster.person.Person.tax_deduction_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Record of tax_deduction over all past years.</p>
</dd></dl>

<dl class="method">
<dt>
<em class="property">property </em><code class="sig-name descname">tax_treatment</code></dt>
<dd><p>The tax treatment of the Person.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_withheld">
<em class="property">property </em><code class="sig-name descname">tax_withheld</code><a class="headerlink" href="#forecaster.person.Person.tax_withheld" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.tax_withheld_history">
<em class="property">property </em><code class="sig-name descname">tax_withheld_history</code><a class="headerlink" href="#forecaster.person.Person.tax_withheld_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Record of tax_withheld over all past years.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.taxable_income">
<em class="property">property </em><code class="sig-name descname">taxable_income</code><a class="headerlink" href="#forecaster.person.Person.taxable_income" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns cached value in *_history dict if available.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.person.Person.taxable_income_history">
<em class="property">property </em><code class="sig-name descname">taxable_income_history</code><a class="headerlink" href="#forecaster.person.Person.taxable_income_history" title="Permalink to this definition">¶</a></dt>
<dd><p>Record of taxable_income over all past years.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-forecaster.scenario">
<span id="forecaster-scenario-module"></span><h2>forecaster.scenario module<a class="headerlink" href="#module-forecaster.scenario" title="Permalink to this headline">¶</a></h2>
<p>Basic economic classes, such as <cite>Scenario</cite> and <cite>Money</cite>.</p>
<dl class="class">
<dt id="forecaster.scenario.InflationAdjust">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.scenario.</code><code class="sig-name descname">InflationAdjust</code><span class="sig-paren">(</span><em class="sig-param">scenario</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#InflationAdjust"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.InflationAdjust" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Callable inflation_adjust object with mutable state.</p>
<dl class="attribute">
<dt id="forecaster.scenario.InflationAdjust.scenario">
<code class="sig-name descname">scenario</code><a class="headerlink" href="#forecaster.scenario.InflationAdjust.scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>Scenario</cite> defining an
<cite>accumulation_function</cite> for inflation over several years.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#forecaster.scenario.Scenario" title="forecaster.scenario.Scenario">Scenario</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.InflationAdjust.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">target_year</em>, <em class="sig-param">base_year=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#InflationAdjust.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.InflationAdjust.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inflation-adjustment factor from base_year to target_year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_year</strong> (<em>int</em>) – The year for which an
inflation-adjustment factor is desired.</p></li>
<li><p><strong>base_year</strong> (<em>int</em>) – <p>The year in which inflation-adjusted
figures are expressed.</p>
<p>The inflation adjustment for this year is 1 and the
inflation adjustment for target_year is defined relative
to this year.</p>
<p>Optional. Defaults to the initial year of the object’s
<cite>scenario</cite> attribute.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The inflation-adjustment factor from base_year to
target_year. This is the product of inflation-adjustments
for each year (or its inverse, if target_year precedes
base_year).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Decimal</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.InflationAdjust.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">scenario</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#InflationAdjust.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.InflationAdjust.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inits InflationAdjust.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="forecaster.scenario.Scenario">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.scenario.</code><code class="sig-name descname">Scenario</code><span class="sig-paren">(</span><em class="sig-param">initial_year</em>, <em class="sig-param">num_years</em>, <em class="sig-param">inflation=0</em>, <em class="sig-param">stock_return=0</em>, <em class="sig-param">bond_return=0</em>, <em class="sig-param">other_return=0</em>, <em class="sig-param">management_fees=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Describes an economic scenario over the course of a simulation.</p>
<p>For example, provides inflation rates and rates of return for each
year of the simulation.</p>
<p>This is the foil to <cite>Strategy</cite>; all <cite>Scenario</cite> information is
reflective of broader economic trends and is independent of any user
action.</p>
<dl class="attribute">
<dt id="forecaster.scenario.Scenario.initial_year">
<code class="sig-name descname">initial_year</code><a class="headerlink" href="#forecaster.scenario.Scenario.initial_year" title="Permalink to this definition">¶</a></dt>
<dd><p>The first year of the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.num_years">
<code class="sig-name descname">num_years</code><a class="headerlink" href="#forecaster.scenario.Scenario.num_years" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of years in the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.inflation">
<code class="sig-name descname">inflation</code><a class="headerlink" href="#forecaster.scenario.Scenario.inflation" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>{year, inflation}</cite> pairs, where
<cite>inflation</cite> is a percentage rate (e.g. <cite>Decimal(0.5)</cite> is
50%).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.stock_return">
<code class="sig-name descname">stock_return</code><a class="headerlink" href="#forecaster.scenario.Scenario.stock_return" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>{year, return}</cite> pairs where
<cite>return</cite> is the rate of return for stocks in the given year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.bond_return">
<code class="sig-name descname">bond_return</code><a class="headerlink" href="#forecaster.scenario.Scenario.bond_return" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>{year, return}</cite> pairs where
<cite>return</cite> is the rate of return for bonds in the given year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.other_return">
<code class="sig-name descname">other_return</code><a class="headerlink" href="#forecaster.scenario.Scenario.other_return" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>{year, return}</cite> pairs where
<cite>return</cite> is the rate of return for other property (e.g.
real estate) in the given year. Optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.scenario.Scenario.management_fees">
<code class="sig-name descname">management_fees</code><a class="headerlink" href="#forecaster.scenario.Scenario.management_fees" title="Permalink to this definition">¶</a></dt>
<dd><p><cite>{year, fees}</cite> pairs
where <cite>fees</cite> is the rate at which management fees are
charged in invested assets in the given year. Optional.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">initial_year</em>, <em class="sig-param">num_years</em>, <em class="sig-param">inflation=0</em>, <em class="sig-param">stock_return=0</em>, <em class="sig-param">bond_return=0</em>, <em class="sig-param">other_return=0</em>, <em class="sig-param">management_fees=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor for <cite>Scenario</cite>.</p>
<p>Arguments may be dicts (of {year, value} pairs), lists (or
similar <cite>Sequence</cite>) or scalar values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inflation</strong> (<em>Decimal</em><em>, </em><em>list</em><em>, </em><em>dict</em>) – The rate of inflation.</p></li>
<li><p><strong>stock_return</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><em>Decimal</em><em>]</em>) – <cite>{year: return}</cite> pairs
for stocks.</p></li>
<li><p><strong>bond_return</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><em>Decimal</em><em>]</em>) – <cite>{year: return}</cite> pairs
for bonds.</p></li>
<li><p><strong>other_return</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><em>Decimal</em><em>]</em>) – <cite>{year: return}</cite> pairs
for other assets (not stocks/bonds), e.g. real estate.</p></li>
<li><p><strong>management_fees</strong> (<em>Decimal</em><em>, </em><em>list</em><em>, </em><em>dict</em>) – The management fees
charged on investments.</p></li>
<li><p><strong>person1_raise_rate</strong> (<em>Decimal</em><em>, </em><em>list</em><em>, </em><em>dict</em>) – The amount that is
expected for a raise for person1 this year, expressed as
a percentage (e.g. 0.05 for a 5% raise).</p></li>
<li><p><strong>person2_raise_rate</strong> (<em>Decimal</em><em>, </em><em>list</em><em>, </em><em>dict</em>) – The amount that is
expected for a raise for person2 this year, expressed as
a percentage (e.g. 0.05 for a 5% raise).</p></li>
<li><p><strong>initial_year</strong> (<em>int</em>) – The first year of the projection.</p></li>
<li><p><strong>num_years</strong> (<em>int</em>) – The number of years in the projection.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – num_years must be positive.</p></li>
<li><p><strong>ValueError</strong> – input object cannot be processed by _build_dict.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.__iter__">
<code class="sig-name descname">__iter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.__iter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over years modelled by the Scenario.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>int</em> – Each year modelled by the Scenario, in ascending order.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.__len__">
<code class="sig-name descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.__len__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of years modelled by the Scenario.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.accumulation_function">
<code class="sig-name descname">accumulation_function</code><span class="sig-paren">(</span><em class="sig-param">year1</em>, <em class="sig-param">year2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.accumulation_function"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.accumulation_function" title="Permalink to this definition">¶</a></dt>
<dd><p>The discount applied in the period from year1 to year2.</p>
<p>If year2 precedes year1 then the discount rate is inverted.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.discount_rate">
<code class="sig-name descname">discount_rate</code><span class="sig-paren">(</span><em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.discount_rate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.discount_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the discount rate for <cite>year</cite>.</p>
<p>This is the same as calling <cite>inflation[year]</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.inflation_adjust">
<em class="property">property </em><code class="sig-name descname">inflation_adjust</code><a class="headerlink" href="#forecaster.scenario.Scenario.inflation_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>Inflation-adjustment factor from base_year to target_year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_year</strong> (<em>int</em>) – The year for which an
inflation-adjustment factor is desired.</p></li>
<li><p><strong>base_year</strong> (<em>int</em>) – <p>The year in which inflation-adjusted
figures are expressed.</p>
<p>The inflation adjustment for this year is 1 and the
inflation adjustment for target_year is defined relative
to this year.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The inflation-adjustment factor from <cite>base_year</cite> to
<cite>target_year</cite>. This is the product of inflation-adjustments
for each year (or its inverse, if target_year precedes
base_year).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Decimal</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.scenario.Scenario.inflation_adjustments">
<code class="sig-name descname">inflation_adjustments</code><span class="sig-paren">(</span><em class="sig-param">base_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/scenario.html#Scenario.inflation_adjustments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.scenario.Scenario.inflation_adjustments" title="Permalink to this definition">¶</a></dt>
<dd><p>Annual inflation adjustment factors relative to base_year.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p><cite>{year: adjustment}</cite> pairs.</p>
<p><cite>adjustment</cite> is the cumulative inflation since <cite>base_year</cite>
(or, for years prior to <cite>base_year</cite>, it is the present value
of $1 in base_year)</p>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict[int, Decimal]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-forecaster.settings">
<span id="forecaster-settings-module"></span><h2>forecaster.settings module<a class="headerlink" href="#module-forecaster.settings" title="Permalink to this headline">¶</a></h2>
<p>This module provides user-modifiable settings for the application.</p>
<p>It provides the <cite>Settings</cite> class, which contains various <cite>*Defaults</cite>
classes. They provide default values for aspects of the application.</p>
<dl class="class">
<dt id="forecaster.settings.Settings">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.settings.</code><code class="sig-name descname">Settings</code><a class="reference internal" href="_modules/forecaster/settings.html#Settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.settings.Settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Container for variables used to control application settings.</p>
<p>This class can be instantiated as an object and, where supported,
passed to other objects to provide defaults for initialization.
However, it also provides sensible defaults at the class level, so
one might equivalently call Settings (the class) or Settings()
(an object).</p>
<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_adjust_retirement">
<code class="sig-name descname">allocation_adjust_retirement</code><em class="property"> = True</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_adjust_retirement" title="Permalink to this definition">¶</a></dt>
<dd><p>DebtPaymentStrategy defaults</p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_max_equity">
<code class="sig-name descname">allocation_max_equity</code><em class="property"> = Decimal('0.3')</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_max_equity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_min_equity">
<code class="sig-name descname">allocation_min_equity</code><em class="property"> = Decimal('0.3')</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_min_equity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_risk_trans_period">
<code class="sig-name descname">allocation_risk_trans_period</code><em class="property"> = 20</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_risk_trans_period" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_std_retirement_age">
<code class="sig-name descname">allocation_std_retirement_age</code><em class="property"> = 65</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_std_retirement_age" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_strategy">
<code class="sig-name descname">allocation_strategy</code><em class="property"> = 'n-age'</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.allocation_target">
<code class="sig-name descname">allocation_target</code><em class="property"> = 65</em><a class="headerlink" href="#forecaster.settings.Settings.allocation_target" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.bond_return">
<code class="sig-name descname">bond_return</code><em class="property"> = 0.04</em><a class="headerlink" href="#forecaster.settings.Settings.bond_return" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.currency">
<code class="sig-name descname">currency</code><em class="property"> = 'CAD'</em><a class="headerlink" href="#forecaster.settings.Settings.currency" title="Permalink to this definition">¶</a></dt>
<dd><p>Defaults for <cite>Scenario</cite></p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.debt_payment_strategy">
<code class="sig-name descname">debt_payment_strategy</code><em class="property"> = 'Avalanche'</em><a class="headerlink" href="#forecaster.settings.Settings.debt_payment_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Tax defaults</p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.display_year">
<code class="sig-name descname">display_year</code><em class="property"> = 2019</em><a class="headerlink" href="#forecaster.settings.Settings.display_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.inflation">
<code class="sig-name descname">inflation</code><em class="property"> = 0.02</em><a class="headerlink" href="#forecaster.settings.Settings.inflation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.initial_year">
<code class="sig-name descname">initial_year</code><em class="property"> = 2019</em><a class="headerlink" href="#forecaster.settings.Settings.initial_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.living_expenses_base_amount">
<code class="sig-name descname">living_expenses_base_amount</code><em class="property"> = Decimal('60000')</em><a class="headerlink" href="#forecaster.settings.Settings.living_expenses_base_amount" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.living_expenses_inflation_adjust">
<code class="sig-name descname">living_expenses_inflation_adjust</code><em class="property"> = True</em><a class="headerlink" href="#forecaster.settings.Settings.living_expenses_inflation_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>SavingStrategy defaults</p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.living_expenses_rate">
<code class="sig-name descname">living_expenses_rate</code><em class="property"> = Decimal('0.2')</em><a class="headerlink" href="#forecaster.settings.Settings.living_expenses_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.living_expenses_strategy">
<code class="sig-name descname">living_expenses_strategy</code><em class="property"> = 'Constant living expenses'</em><a class="headerlink" href="#forecaster.settings.Settings.living_expenses_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.management_fees">
<code class="sig-name descname">management_fees</code><em class="property"> = 0.005</em><a class="headerlink" href="#forecaster.settings.Settings.management_fees" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.num_years">
<code class="sig-name descname">num_years</code><em class="property"> = 100</em><a class="headerlink" href="#forecaster.settings.Settings.num_years" title="Permalink to this definition">¶</a></dt>
<dd><p>LivingExpensesStrategy defaults</p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.other_return">
<code class="sig-name descname">other_return</code><em class="property"> = 0.03</em><a class="headerlink" href="#forecaster.settings.Settings.other_return" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.saving_strategy">
<code class="sig-name descname">saving_strategy</code><em class="property"> = 'Ordered'</em><a class="headerlink" href="#forecaster.settings.Settings.saving_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.saving_weights">
<code class="sig-name descname">saving_weights</code><em class="property"> = {'Account': 1}</em><a class="headerlink" href="#forecaster.settings.Settings.saving_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>WithdrawalStrategy defaults</p>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.stock_return">
<code class="sig-name descname">stock_return</code><em class="property"> = 0.07</em><a class="headerlink" href="#forecaster.settings.Settings.stock_return" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.tax_brackets">
<code class="sig-name descname">tax_brackets</code><em class="property"> = {2019: {Decimal('0'): Decimal('0')}}</em><a class="headerlink" href="#forecaster.settings.Settings.tax_brackets" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.tax_credit_rate">
<code class="sig-name descname">tax_credit_rate</code><em class="property"> = {2019: Decimal('0')}</em><a class="headerlink" href="#forecaster.settings.Settings.tax_credit_rate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.tax_payment_timing">
<code class="sig-name descname">tax_payment_timing</code><em class="property"> = 'start'</em><a class="headerlink" href="#forecaster.settings.Settings.tax_payment_timing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.tax_personal_deduction">
<code class="sig-name descname">tax_personal_deduction</code><em class="property"> = {2019: Decimal('0')}</em><a class="headerlink" href="#forecaster.settings.Settings.tax_personal_deduction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.withdrawal_strategy">
<code class="sig-name descname">withdrawal_strategy</code><em class="property"> = 'Ordered'</em><a class="headerlink" href="#forecaster.settings.Settings.withdrawal_strategy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="forecaster.settings.Settings.withdrawal_weights">
<code class="sig-name descname">withdrawal_weights</code><em class="property"> = {'Account': 1}</em><a class="headerlink" href="#forecaster.settings.Settings.withdrawal_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>AllocationStrategy defaults</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-forecaster.tax">
<span id="forecaster-tax-module"></span><h2>forecaster.tax module<a class="headerlink" href="#module-forecaster.tax" title="Permalink to this headline">¶</a></h2>
<p>This module provides a Tax class and subclasses.</p>
<p>These classes are callable with the form <cite>tax(taxable_income, year)</cite></p>
<dl class="class">
<dt id="forecaster.tax.Tax">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.tax.</code><code class="sig-name descname">Tax</code><span class="sig-paren">(</span><em class="sig-param">tax_brackets</em>, <em class="sig-param">personal_deduction=None</em>, <em class="sig-param">credit_rate=None</em>, <em class="sig-param">inflation_adjust=None</em>, <em class="sig-param">payment_timing='start'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Determines taxes payable on taxable income.</p>
<p>When called with a Money-type first argument (i.e. as
<cite>tax(taxable_income, year)</cite>), this object returns the amount of tax
payable on taxable income without any source-specific deduction or
credit. This should correspond to how employment withholding taxes
are calculated, so <cite>gross_income - tax(gross_income, year)</cite>
will return a person’s net income.</p>
<p>For a more sophisticated assessment of credit/etc., provide a
<cite>Person</cite> object as input (or an iterable of <cite>Person</cite> objects). This
will assess taxable income, credits, and deductions for the <cite>Person</cite>
and any <cite>Account</cite> objects they own.</p>
<p>Thus, calling <cite>tax({person1, person2}, year)</cite> will
return the total tax liability for the year for both person1 and
person2, after applying any credit/etc., and including the
employment income and taxable account activity of each <cite>Person</cite>.</p>
<p>If spouses are passed in, they are processed together.</p>
<dl class="attribute">
<dt id="forecaster.tax.Tax.tax_brackets">
<code class="sig-name descname">tax_brackets</code><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_brackets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.tax_brackets" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of <cite>{year: brackets}</cite> pairs, where
<cite>brackets</cite> is a dict of <cite>{bracket: rate}</cite> pairs. <cite>bracket</cite>
must be convertible to Money and <cite>rate</cite> must be convertible
to Decimal. <cite>rate</cite> will be interpreted as a percentage (e.g.
Decimal(‘0.03’) is interpreted as 3%)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.tax.Tax.personal_deduction">
<code class="sig-name descname">personal_deduction</code><a class="reference internal" href="_modules/forecaster/tax.html#Tax.personal_deduction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.personal_deduction" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of <cite>{year: deduction}</cite> pairs,
where <cite>deduction</cite> is convertible to Money.</p>
<p>The personal deduction for a given year is deducted from
income when determining income tax in that year.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.tax.Tax.credit_rate">
<code class="sig-name descname">credit_rate</code><a class="reference internal" href="_modules/forecaster/tax.html#Tax.credit_rate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.credit_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of <cite>{year: rate}</cite> pairs, where <cite>rate</cite>
is convertible to Decimal.</p>
<p>The credit rate is used to determine how much each tax
credit reduced total tax liability.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.tax.Tax.accum">
<code class="sig-name descname">accum</code><a class="reference internal" href="_modules/forecaster/tax.html#Tax.accum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.accum" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of <cite>{year: {bracket: accum}}</cite> pairs, where
each <cite>bracket</cite> corresponds to a key in <cite>tax_brackets</cite> and
<cite>accum</cite> is the sum of tax payable on the income falling into
all lower brackets.</p>
<p>For example, if there are $10, $100, and $1000 tax brackets,
then <cite>accum[year][$1000]</cite> is equal to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tax_brackets</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="mi">10</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">tax_brackets</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="forecaster.tax.Tax.inflation_adjust">
<code class="sig-name descname">inflation_adjust</code><a class="headerlink" href="#forecaster.tax.Tax.inflation_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>A method with the following form:
<cite>inflation_adjust(target_year, base_year)</cite>.</p>
<p>Returns a Decimal scaling factor. Multiplying this by a
nominal value in base_year will yield a nominal value in
target_year with the same real value.</p>
<p>Optional. If not provided, all values are assumed to be in
real terms, so no inflation adjustment is performed.</p>
</dd></dl>

<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taxable_income</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>, </em><em>iterable</em>) – Taxable income for the year,
either as a single scalar Money object or as an iterable
(list, set, etc.) of sources of taxable income (i.e.
Person/Account objects).</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The taxation year. This determines which tax rules
and inflation-adjusted brackets are used.</p></li>
<li><p><strong>deduction</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – <p>Any other deduction which can be
applied and which aren’t evident from the income sources
themselves. These will generally be itemized deduction.</p>
<p>It’s a good idea to be familiar with the Tax implementation
you’re working with before passing any of these, otherwise
you risk double-counting.</p>
<p>Optional.</p>
</p></li>
<li><p><strong>credit</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – <p>Any other tax credit which can be
applied and which aren’t evident from the income sources
themselves. These will generally be boutique tax credit.</p>
<p>Optional.</p>
</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="forecaster.tax.Tax.__call__">
<code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param">income</em>, <em class="sig-param">year</em>, <em class="sig-param">deduction=None</em>, <em class="sig-param">credit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines taxes owing on one or more income sources.</p>
<p>Each <cite>Person</cite> object passed as input may have a number of tax
sources (e.g. <cite>Account`s, `Benefit`s) associated with them,
which `Tax</cite> will take into account when calculating taxes.
They don’t need to be passed explicitly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>income</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>, </em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><em>iterable</em>) – Taxable income for the
year, either as a single scalar Money object, a single
Person object, or as an iterable (list, set, etc.) of
Person objects.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The taxation year. This determines which tax
rules and inflation-adjusted brackets are used.</p></li>
<li><p><strong>deduction</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>, </em><em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – <p>Any other deduction which can be applied and which
aren’t modelled by the income sources themselves.
These will generally be itemized deduction.</p>
<p>If <cite>income</cite> is passed as an iterable, this should also
be an iterable; otherwise it should be a Money object.</p>
<p>It’s a good idea to be familiar with the <cite>Tax</cite> and
<cite>Person</cite> implementation you’re working with before
passing any of these, otherwise you risk double-counting
if both the <cite>Person</cite> and <cite>Tax</cite> objects implement the
same deduction.</p>
<p>Optional.</p>
</p></li>
<li><p><strong>credit</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>, </em><em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – <p>Any other tax credit which can be applied and which
aren’t modelled by the income sources themselves.</p>
<p>These are usually boutique tax credits.</p>
<p>See <cite>deduction</cite> for further comments on being familiar
with both <cite>Tax</cite> and <cite>Person</cite> implementations when
passing this.</p>
<p>Optional.</p>
</p></li>
<li><p><strong>Returns</strong> – Money: The total amount of tax owing for the year.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">tax_brackets</em>, <em class="sig-param">personal_deduction=None</em>, <em class="sig-param">credit_rate=None</em>, <em class="sig-param">inflation_adjust=None</em>, <em class="sig-param">payment_timing='start'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the Tax object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tax_brackets</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><em>dict</em><em>[</em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>, </em><em>Decimal</em><em>]</em><em>]</em>) – <cite>{year: brackets}</cite> pairs, where <cite>brackets</cite> is itself a
dict of <cite>{bracket: rate}</cite> pairs. Any income above
<cite>bracket</cite> is taxed at <cite>rate</cite>. (It’s thus usually a good
idea to have at least a {0: rate} element!)</p></li>
<li><p><strong>personal_deduction</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – <cite>{year: deduction}</cite>
pairs. This deduction is applied to the income of each
person when determining tax liability.</p></li>
<li><p><strong>credit_rate</strong> (<em>dict</em><em>[</em><em>int</em><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – <cite>{year: rate}</cite> pairs.
This rate is applied to any tax credits the person is
eligible for when determining tax liability.</p></li>
<li><p><strong>inflation_adjust</strong> – <p>A method with the following form:
<cite>inflation_adjust(val, this_year, target_year)</cite>.
Returns a Decimal object which is the inflation-
adjustment factor from base_year to target_year.</p>
<p>Optional. If not provided, all values are assumed to be
in real terms, so no inflation adjustment is performed.</p>
</p></li>
<li><p><strong>payment_timing</strong> (<em>Decimal</em><em>, </em><em>str</em>) – A <cite>when</cite>-formatted value
specifying the timing of tax refunds and payments for
amounts owing. For example, <cite>‘start’</cite> indicates that
refunds are paid on January 1st and that if taxes are
owing then they are due on January 1st. Optional.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">accum</code><span class="sig-paren">(</span><em class="sig-param">year</em>, <em class="sig-param">bracket=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.accum"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The accumulated tax payable for a given tax bracket.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.add_accum">
<code class="sig-name descname">add_accum</code><span class="sig-paren">(</span><em class="sig-param">brackets</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.add_accum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.add_accum" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an accum dict for the given brackets and year.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.add_brackets">
<code class="sig-name descname">add_brackets</code><span class="sig-paren">(</span><em class="sig-param">brackets</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.add_brackets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.add_brackets" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a year of tax brackets to attribute self.tax_brackets.</p>
<p>Also generates an <cite>accum</cite> dict based on the tax brackets.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">credit_rate</code><span class="sig-paren">(</span><em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.credit_rate"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The credit rate for the given year.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.credits">
<code class="sig-name descname">credits</code><span class="sig-paren">(</span><em class="sig-param">person</em>, <em class="sig-param">year</em>, <em class="sig-param">deductions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.credits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.credits" title="Permalink to this definition">¶</a></dt>
<dd><p>The tax credits each person is eligible for.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>person</strong> (<a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a>) – The person for whom credits
are being assessed.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which credits are being
assessed.</p></li>
<li><p><strong>deductions</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – The deductions claimable
for the person. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The credits for the person.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.deductions">
<code class="sig-name descname">deductions</code><span class="sig-paren">(</span><em class="sig-param">person</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.deductions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.deductions" title="Permalink to this definition">¶</a></dt>
<dd><p>The deductions the person is eligible for.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>person</strong> (<a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a>) – The person for whom deductions
are being assessed.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which deductions are being
assessed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The deductions for the person.</dt><dd><p>This base class determines the personal deduction
and other deductions provided by <cite>Person</cite>.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.marginal_bracket">
<code class="sig-name descname">marginal_bracket</code><span class="sig-paren">(</span><em class="sig-param">taxable_income</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.marginal_bracket"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.marginal_bracket" title="Permalink to this definition">¶</a></dt>
<dd><p>The top tax bracket that taxable_income falls into.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.marginal_rate">
<code class="sig-name descname">marginal_rate</code><span class="sig-paren">(</span><em class="sig-param">taxable_income</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.marginal_rate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.marginal_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>The marginal rate for the given income.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.payment_timing">
<em class="property">property </em><code class="sig-name descname">payment_timing</code><a class="headerlink" href="#forecaster.tax.Tax.payment_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>The timing of payments to/from the tax authority.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">personal_deduction</code><span class="sig-paren">(</span><em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.personal_deduction"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Personal deduction for <cite>year</cite>.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="sig-name descname">tax_brackets</code><span class="sig-paren">(</span><em class="sig-param">year</em>, <em class="sig-param">bracket=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_brackets"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Retrieve tax brackets for year.</p>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.tax_money">
<code class="sig-name descname">tax_money</code><span class="sig-paren">(</span><em class="sig-param">taxable_income</em>, <em class="sig-param">year</em>, <em class="sig-param">deduction=&lt;Money: 0 CAD&gt;</em>, <em class="sig-param">credit=&lt;Money: 0 CAD&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_money"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.tax_money" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns taxes owing on a given amount of taxable income.</p>
<p>This method does not apply any deductions or credits other than
what is passed to it. For example, the personal deduction is
not applied (unless explicitly passed).</p>
<p>In general, you should be calling <cite>tax_person</cite> if you want
to have deductions and credits automatically applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>taxable_income</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – The amount of income to be taxed,
assuming it’s taxable in the hands of a single person
with no other income and no deduction or credit other
than those provided explicitly to this method.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which tax treatment is applied.</p></li>
<li><p><strong>deduction</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – Any deduction from taxable income to be
applied before determining total tax liability.
Optional.</p></li>
<li><p><strong>credit</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – Any tax credit to be applied against tax
liability; these are applied at the tax credit rate for
<cite>year</cite>. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Total tax liability arising from <cite>taxable_income</cite> in</dt><dd><p><cite>year</cite>, after applying <cite>deduction</cite> and <cite>credit</cite>.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.tax_people">
<code class="sig-name descname">tax_people</code><span class="sig-paren">(</span><em class="sig-param">people</em>, <em class="sig-param">year</em>, <em class="sig-param">deduction=None</em>, <em class="sig-param">credit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_people"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.tax_people" title="Permalink to this definition">¶</a></dt>
<dd><p>Total tax liability for a group of people.</p>
<p>The people do not necessarily need to be spouses or related in
any way. If a pair of spouses is in <cite>people</cite>, they will be
passed to <cite>tax_spouses</cite> to be processed together.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>people</strong> (<em>iterable</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>]</em>) – Any number of people.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which tax treatment is needed.</p></li>
<li><p><strong>deduction</strong> (<em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – A dict of
<cite>{person: deduction}</cite> pairs. Optional.</p></li>
<li><p><strong>credit</strong> (<em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – A dict of <cite>{person: credit}</cite>
pairs. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The total tax liability of the people.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.tax_person">
<code class="sig-name descname">tax_person</code><span class="sig-paren">(</span><em class="sig-param">person</em>, <em class="sig-param">year</em>, <em class="sig-param">deduction=&lt;Money: 0 CAD&gt;</em>, <em class="sig-param">credit=&lt;Money: 0 CAD&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_person"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.tax_person" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns tax treatment for an individual person.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>person</strong> (<a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a>) – A person for whom tax liability will be
determined.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which tax treatment is needed.</p></li>
<li><p><strong>deduction</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – A deduction to be applied against
the person’s income, on top of whatever other deductions
they are eligible for, including the personal deduction
for the year and any specific <cite>tax_deduction</cite> attribute
values of the person and their accounts.</p></li>
<li><p><strong>credit</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – A credit to be applied against the
person’s tax liability, on top of whatever other credits
they are eligible for (provided via the <cite>tax_deduction</cite>
member of <cite>person</cite> and any of their accounts).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tax liability of the person.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="forecaster.tax.Tax.tax_spouses">
<code class="sig-name descname">tax_spouses</code><span class="sig-paren">(</span><em class="sig-param">people</em>, <em class="sig-param">year</em>, <em class="sig-param">deduction=None</em>, <em class="sig-param">credit=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/tax.html#Tax.tax_spouses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.tax.Tax.tax_spouses" title="Permalink to this definition">¶</a></dt>
<dd><p>Tax treatment for a pair of spouses.</p>
<p>This method doesn’t provide any special tax treatment to the
spouses, but it allows subclasses to override its functionality
to apply special tax treatments.</p>
<p>This method is also not restricted to two-element inputs,
although in countries like Canada (which only recognizes two-
person marriages for tax purposes) this method should only ever
receive a two-element <cite>people</cite> input. By allowing for arbitrary-
size inputs, subclasses can extend this functionality to deal
with countries where plural marriage is recognized by the tax
system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>people</strong> (<em>iterable</em>) – Persons with mutual spousal
relationships. In countries requiring monogamous
marriages, this input should have exactly two elements.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which tax treatment is needed.</p></li>
<li><p><strong>deduction</strong> (<em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – A dict of
<cite>{person: deduction}</cite> pairs. Optional.</p></li>
<li><p><strong>credit</strong> (<em>dict</em><em>[</em><a class="reference internal" href="#forecaster.person.Person" title="forecaster.person.Person"><em>Person</em></a><em>, </em><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a><em>]</em>) – A dict of <cite>{person: credit}</cite>
pairs. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tax liability of the spouses.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-forecaster.utility">
<span id="forecaster-utility-module"></span><h2>forecaster.utility module<a class="headerlink" href="#module-forecaster.utility" title="Permalink to this headline">¶</a></h2>
<p>A module with free methods and extensions to third-party classes.</p>
<p>Used throughout the application, without any dependency on any other
modules.</p>
<dl class="class">
<dt id="forecaster.utility.Timing">
<em class="property">class </em><code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">Timing</code><span class="sig-paren">(</span><em class="sig-param">when=0.5</em>, <em class="sig-param">frequency=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#Timing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.Timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
<p>A dict of {timing: weight} pairs.</p>
<p>This is really just a vanilla dict with a convenient init method.
It divides the interval [0,1] into a number of equal-length periods
equal to <cite>frequency</cite> and, within each period, assigns a timing at
<cite>when</cite>. The timings are equally-weighted.</p>
<p>This class provides a copy-constructor that can receive a dict of
{when: value} pairs. If a dict has Money-type values, these are
converted to Decimal to avoid arithmetic errors.</p>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<p>Timing()
# {0.5: 1}
Timing(when=1, frequency=4)
# {0.25: 0.25, 0.5: 0.25, 0.75: 0.25, 1: 0.25}
Timing(when=0, frequency=4)
# {0: 0.25, 0.25: 0.25, 0.5: 0.25, 0.75: 0.25}
Timing(when=0.5, frequency=2)
# {0.25: 0.5, 0.75: 0.5}</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>when</strong> (<em>Number</em><em>, </em><em>str</em>) – When transactions occur in each period (e.g.
‘start’, ‘end’, 0.5). Uses the same syntax as
<cite>forecaster.utility.when_conv</cite>. Optional.</p></li>
<li><p><strong>frequency</strong> (<em>str</em><em>, </em><em>int</em>) – The number of periods (and thus the number
of transactions). Uses the same syntax as
<cite>forecaster.utility.frequency_conv</cite>. Optional.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="forecaster.utility.Timing.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">when=0.5</em>, <em class="sig-param">frequency=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#Timing.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.Timing.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a Timing dict.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="forecaster.utility.add_transactions">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">add_transactions</code><span class="sig-paren">(</span><em class="sig-param">base</em>, <em class="sig-param">added</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#add_transactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.add_transactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines the values of two dicts, summing values of shared keys.</p>
<p>This method mutates its first argument (base). If you don’t want
that behaviour, copy your input dict before calling this method.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p>d1 = {1: 1, 2: 2}
d2 = {2: 2, 3: 3}
add_transactions(d1, d2)
// d1 == {1: 1, 2: 4, 3: 3}</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>[</strong><strong>dict</strong><strong>[</strong><strong>Any</strong><strong>, </strong><strong>Any</strong><strong>]</strong><strong>]</strong> (<em>added</em>) – A dictionary, generally of transactions
(i.e. <cite>Decimal: Money</cite> pairs), but potentially of any types.
Mutated by this method.</p></li>
<li><p><strong>[</strong><strong>dict</strong><strong>[</strong><strong>Any</strong><strong>, </strong><strong>Any</strong><strong>]</strong><strong>]</strong> – A dictionary whose values support
addition (via <cite>+</cite> operator) with the same-key values of
<cite>base</cite>. Not mutated by this method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None. Input <cite>base</cite> is mutated instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.build_inflation_adjust">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">build_inflation_adjust</code><span class="sig-paren">(</span><em class="sig-param">inflation_adjust=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#build_inflation_adjust"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.build_inflation_adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an inflation_adjust method.</p>
<p>If inflation_adjust is not provided, all values are assumed to be in
real terms, the returned method will return its argument <cite>val</cite>
without inflation adjustment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>inflation_adjust</strong> – May be a dict of {year: inflation_adjustment}
pairs, where <cite>inflation_adjustment</cite> is a Decimal that
indicates a cumulative year-over-year inflation factor.
Or may be a method (returned as-is). Optional.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><cite>inflation_adjust(val, this_year, target_year)</cite>.</p>
<p>The method returns a Money object (assuming Money-typed <cite>val</cite>
input).</p>
<p>Finds a nominal value in <cite>target_year</cite> with the same real
value as <cite>val</cite>, a nominal value in <cite>this_year</cite>.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>A method with the following form</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.extend_inflation_adjusted">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">extend_inflation_adjusted</code><span class="sig-paren">(</span><em class="sig-param">vals</em>, <em class="sig-param">inflation_adjust</em>, <em class="sig-param">target_year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#extend_inflation_adjusted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.extend_inflation_adjusted" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills in partial time-series with inflation-adjusted values.</p>
<p>This method is targeted at inflation-adjusting input data (e.g.
as found in the Constants module), which tends to be incomplete
and can represent non-sequential years. New years are often entered
when something changes (i.e. when values change in real terms), so
this method prefers to infer inflation-adjusted values based on the
most recent <em>past</em> years when possible (since future years might
not be comparable).</p>
<p>If <cite>target_year</cite> is in <cite>vals</cite>, then this method returns the value
for <cite>target_year</cite> in <cite>vals</cite> without further inflation-adjusting
(as that value is already in nominal terms).</p>
<p>If <cite>target_year</cite> is not in <cite>vals</cite>, then this method attempts to
interpolate an inflation-adjusted value based on the last year in
<cite>vals</cite> before <cite>target_year</cite> or, if no such year exists, based on the
first year in <cite>vals</cite> after <cite>target_year</cite>.</p>
<p>If the values of <cite>vals</cite> are dicts or other iterable, this method
returns a dict or other iterable with values that have each been
inflation-adjusted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vals</strong> (<em>dict</em>) – <p>A dict of <cite>{year: val}</cite> pairs, where <cite>val</cite> is a
scalar, list, or dict. This dict may be incomplete, in the
sense that some years may not be represented.</p>
<p>If <cite>val</cite> is non-scalar, an object of the same type is
returned with each of its values inflation-adjusted.</p>
</p></li>
<li><p><strong>inflation_adjust</strong> – A method of the form
<cite>inflation_adjust(val, this_year, target_year)</cite> that finds a
nominal value in <cite>target_year</cite> with the same real value as
nominal value <cite>val</cite> in <cite>this_year</cite>.</p></li>
<li><p><strong>year</strong> (<em>int</em>) – The year for which an adjusted value is to be
generated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.frequency_conv">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">frequency_conv</code><span class="sig-paren">(</span><em class="sig-param">nper</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#frequency_conv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.frequency_conv" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of periods in a year given a compounding frequency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nper</strong> (<em>str</em><em>, </em><em>int</em>) – A code (str) indicating a compounding
frequency (e.g. ‘W’, ‘M’), an int, or None</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>An int indicating the number of compounding periods in a</dt><dd><p>year or None if compounding is continuous.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – str nper must have a known value.</p></li>
<li><p><strong>ValueError</strong> – nper must be greater than 0.</p></li>
<li><p><strong>TypeError</strong> – nper cannot be losslessly converted to int.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.nearest_year">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">nearest_year</code><span class="sig-paren">(</span><em class="sig-param">vals</em>, <em class="sig-param">year</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#nearest_year"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.nearest_year" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the nearest (past) year to <cite>year</cite> in <cite>vals</cite>.</p>
<p>This is a companion method to <cite>inflation_adjust()</cite>. It’s meant to be
used when you want to pull a value out of an incomplete dict without
inflation-adjusting it (e.g. when you want to grab the most recent
percentage rate from a dict of <cite>{year: Decimal}</cite> pairs.)</p>
<p>If <cite>year</cite> is in <cite>vals</cite>, then this method returns <cite>year</cite>.
If not, then this method tries to find the last year
before <cite>year</cite> that is in <cite>vals</cite>. If that doesn’t work, then this
method tries to find the first year in <cite>vals</cite> following <cite>year</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A year in <cite>vals</cite> is near to <cite>year</cite>, preferring
the nearest preceding year (if it exists) over the nearest
following year.</p>
<p>Returns <cite>None</cite> if <cite>vals</cite> is empty.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.subtract_transactions">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">subtract_transactions</code><span class="sig-paren">(</span><em class="sig-param">base</em>, <em class="sig-param">added</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#subtract_transactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.subtract_transactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Combines values of two dicts, subtracting values of shared keys.</p>
<p>This method mutates its first argument (base). If you don’t want
that behaviour, copy your input dict before calling this method.</p>
<p>The semantics of this method are the same as <cite>add_transactions</cite>,
except that the values of <cite>added</cite> are subtracted from those of
<cite>base</cite>. A consequence of this is that, unlike <cite>add_transactions</cite>,
<cite>subtract_transactions</cite> is not commutative.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>[</strong><strong>dict</strong><strong>[</strong><strong>Any</strong><strong>, </strong><strong>Any</strong><strong>]</strong><strong>]</strong> (<em>added</em>) – A dictionary, generally of transactions
(i.e. <cite>Decimal: Money</cite> pairs), but potentially of any types.
Mutated by this method.</p></li>
<li><p><strong>[</strong><strong>dict</strong><strong>[</strong><strong>Any</strong><strong>, </strong><strong>Any</strong><strong>]</strong><strong>]</strong> – A dictionary whose values support
addition (via <cite>+</cite> operator) with the same-key values of
<cite>base</cite>. Not mutated by this method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None. Input <cite>base</cite> is mutated instead.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.transactions_from_timing">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">transactions_from_timing</code><span class="sig-paren">(</span><em class="sig-param">timing</em>, <em class="sig-param">total</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#transactions_from_timing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.transactions_from_timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a schedule of transactions based on a timing and total</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timing</strong> (<a class="reference internal" href="#forecaster.utility.Timing" title="forecaster.utility.Timing"><em>Timing</em></a>) – The timing of the transactions, each with a
corresponding weight.</p></li>
<li><p><strong>total</strong> (<a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money"><em>Money</em></a>) – The sum of all transactions to be generated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A schedule of transactions, each
transaction having the relative weighting provided by <cite>timing</cite>
and the total value of the transactions summing to <cite>total</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[Decimal, <a class="reference internal" href="forecaster.ledger.html#forecaster.ledger.money.Money" title="forecaster.ledger.money.Money">Money</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="forecaster.utility.when_conv">
<code class="sig-prename descclassname">forecaster.utility.</code><code class="sig-name descname">when_conv</code><span class="sig-paren">(</span><em class="sig-param">when</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/forecaster/utility.html#when_conv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#forecaster.utility.when_conv" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts various types of <cite>when</cite> inputs to Decimal.</p>
<p>The Decimal value is in [0,1], where 0 is the start of the period
and 1 is the end.</p>
<p>NOTE: <cite>numpy</cite> defines its <cite>when</cite> argument such that ‘end’ = 0 and
‘start’ = 1. If you’re using that package, consider whether any
conversions are necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>when</strong> (<em>float</em><em>, </em><em>Decimal</em><em>, </em><em>str</em>) – The timing of the transaction.
Must be in the range [0,1] or in (‘start’, ‘end’).</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>decimal.InvalidOperation</strong> – <cite>when</cite> must be convertible to
    type Decimal</p></li>
<li><p><strong>ValueError</strong> – <cite>when</cite> must be in [0,1]</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Decimal in [0,1]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-forecaster">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-forecaster" title="Permalink to this headline">¶</a></h2>
<p>A package for generating forecasts of personal finance data.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="forecaster.accounts.html" class="btn btn-neutral float-right" title="forecaster.accounts package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="forecaster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Christopher Scott

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>